//

// ******************************************************************
// * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY. *
// ******************************************************************
import { createValidatedOpenApiRouterFromGeneratedEndpointMap } from '@backstage/backend-openapi-utils';
import { EndpointMap } from './apis';

export const spec = {
  openapi: '3.0.3',
  info: {
    title: 'analytics-lens',
    description:
      'This API powers the backend for Backstage analytics-lens plugin.',
    version: '1.0',
    license: {
      name: 'Apache-2.0',
      url: 'http://www.apache.org/licenses/LICENSE-2.0.html',
    },
    contact: {},
  },
  servers: [
    {
      url: '/',
    },
  ],
  paths: {
    '/health': {
      get: {
        description:
          'Checks if the analytics-lens backend is hooked up properly',
        responses: {
          '200': {
            description: 'OK',
            content: {
              'application/json': {
                schema: {
                  type: 'object',
                  properties: {
                    status: {
                      type: 'string',
                    },
                  },
                },
              },
            },
          },
        },
      },
    },
    '/events': {
      post: {
        description: 'Accepts a batch of analytics events from the frontend',
        requestBody: {
          required: true,
          content: {
            'application/json': {
              schema: {
                type: 'array',
                items: {
                  $ref: '#/components/schemas/EventPayload',
                },
              },
              example: [
                {
                  action: 'navigate',
                  subject: '/',
                  attributes: {},
                  context: {
                    pluginId: 'app',
                    extensionId: 'app',
                  },
                  userEntityRef: 'user:development/guest',
                  sessionId: 'e9d7daa1-6ee1-4fad-98f3-125cda2a0560',
                  timestamp: '2026-01-10T15:18:28.646Z',
                },
              ],
            },
          },
        },
        responses: {
          '204': {
            description: 'Accepted',
          },
        },
      },
    },
  },
  components: {
    schemas: {
      EventPayload: {
        type: 'object',
        additionalProperties: {},
        required: [
          'action',
          'subject',
          'context',
          'userEntityRef',
          'sessionId',
          'timestamp',
        ],
        example: {
          action: 'navigate',
          subject: '/',
          attributes: {},
          context: {
            pluginId: 'app',
            extensionId: 'app',
          },
          userEntityRef: 'user:development/guest',
          sessionId: 'e9d7daa1-6ee1-4fad-98f3-125cda2a0560',
          timestamp: '2026-01-10T15:18:28.646Z',
        },
        properties: {
          action: {
            type: 'string',
          },
          subject: {
            type: 'string',
          },
          value: {
            type: 'number',
          },
          attributes: {
            type: 'object',
            additionalProperties: {
              anyOf: [
                {
                  type: 'string',
                },
                {
                  type: 'boolean',
                },
                {
                  type: 'number',
                },
              ],
            },
          },
          context: {
            type: 'object',
            additionalProperties: {},
            properties: {
              pluginId: {
                type: 'string',
              },
              extensionId: {
                type: 'string',
              },
            },
          },
          userEntityRef: {
            type: 'string',
          },
          sessionId: {
            type: 'string',
          },
          timestamp: {
            type: 'string',
          },
        },
      },
    },
  },
} as const;
export const createOpenApiRouter = async (
  options?: Parameters<
    typeof createValidatedOpenApiRouterFromGeneratedEndpointMap
  >['1'],
) =>
  createValidatedOpenApiRouterFromGeneratedEndpointMap<EndpointMap>(
    spec,
    options,
  );
